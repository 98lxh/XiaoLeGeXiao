System.register("chunks:///_virtual/block.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,i,n,o,s,r,l,a,c,u,h,p,d,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){s=e.cclegacy,r=e._decorator,l=e.Node,a=e.Sprite,c=e.SpriteFrame,u=e.Vec3,h=e.tween,p=e.UITransform,d=e.Rect,m=e.Component}],execute:function(){var f,y,v,w,g,b,T,S,B;s._RF.push({},"6cb43f0XAtE34BQ3z1S3Fgm","block",void 0);e("block",(f=r.ccclass("block"),y=r.property({type:l}),v=r.property({type:a}),w=r.property({type:[c]}),f((T=t((b=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s))||this,n(t,"nodeShadow",T,o(t)),n(t,"element",S,o(t)),n(t,"elements",B,o(t)),t.isCanTouch=void 0,t.elementType=void 0,t.is_di=void 0,t.numDi=void 0,t.isEliminate=void 0,t.isMoving=void 0,t.v3BlockOld=void 0,t}i(t,e);var s=t.prototype;return s.start=function(){},s.init=function(e){this.node.scale=new u(1,1,1),this.elementType=e,this.isCanTouch=!0,this.is_di=!1,this.element.spriteFrame=this.elements[this.elementType]},s.initDi=function(e){this.node.scale=new u(1,1,1),this.v3BlockOld=new u(0,0,0),this.isMoving=!0,this.isEliminate=!1,this.numDi=-1,this.elementType=e,this.isCanTouch=!1,this.is_di=!0,this.nodeShadow.active=!1,this.element.spriteFrame=this.elements[this.elementType]},s.shuaXinBlockSPF=function(e){var t=this;this.elementType=e,h(this.element.node).to(.1,{scale:new u(0,0,0)}).call((function(){t.element.spriteFrame=t.elements[t.elementType]})).to(.1,{scale:new u(.7,.7,.7)}).start()},s.setTouch=function(e){this.isCanTouch=e,this.isCanTouch?this.nodeShadow.active=!1:this.nodeShadow.active=!0},s.getBoundingBox=function(){var e=this.node.getComponent(p).getBoundingBox();return new d(e.x+5,e.y+5,e.width-10,e.height-10)},s.update=function(e){},t}(m)).prototype,"nodeShadow",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(b.prototype,"element",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(b.prototype,"elements",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),g=b))||g));s._RF.pop()}}}));

System.register("chunks:///_virtual/game.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameData.ts","./block.ts","./env"],(function(t){"use strict";var e,i,n,o,r,s,a,l,h,u,c,p,d,m,v,f,g,y,b,B,k,D,T,C,S,w;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Node,l=t.Prefab,h=t.Label,u=t.AudioClip,c=t.NodePool,p=t.AudioSource,d=t.input,m=t.Input,v=t.Vec3,f=t.instantiate,g=t.Sprite,y=t.Color,b=t.tween,B=t.UITransform,k=t.Vec2,D=t.sys,T=t.Component},function(t){C=t.gameData},function(t){S=t.block},function(t){w=t.WECHAT}],execute:function(){var E,A,L,x,P,J,M,N,I,z,X,O,_,R,U,K,W,H,G,F,V,j,q,Z,Q,Y,$,tt,et,it,nt,ot,rt,st,at,lt,ht;r._RF.push({},"59e28PFEKdEeL7ZeLR8eOgx","game",void 0);t("game",(E=s.ccclass("game"),A=s.property({type:a}),L=s.property({type:a}),x=s.property({type:a}),P=s.property({type:a}),J=s.property({type:l}),M=s.property({type:a}),N=s.property({type:a}),I=s.property({type:a}),z=s.property({type:h}),X=s.property({type:a}),O=s.property({type:a}),_=s.property({type:a}),R=s.property({type:a}),U=s.property({type:h}),K=s.property({type:l}),W=s.property({type:[h]}),H=s.property({type:[u]}),E((V=e((F=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return e=t.call.apply(t,[this].concat(r))||this,n(e,"transiton",V,o(e)),n(e,"alertButton",j,o(e)),n(e,"alertLayer",q,o(e)),n(e,"alertContent",Z,o(e)),n(e,"preBlock",Q,o(e)),n(e,"parentBlocks",Y,o(e)),n(e,"parentBlocksDi",$,o(e)),n(e,"nodeTip",tt,o(e)),n(e,"labelLevel",et,o(e)),n(e,"layerOver",it,o(e)),n(e,"startLayer",nt,o(e)),n(e,"parentEdit",ot,o(e)),n(e,"startButton",rt,o(e)),n(e,"labelBlocksInfo",st,o(e)),n(e,"preBlockEdit",at,o(e)),n(e,"arrLabelDJ",lt,o(e)),n(e,"arrAudio",ht,o(e)),e.numTouchStart=void 0,e.numTouchEnd=void 0,e.gameData=void 0,e.numLevel=void 0,e.xxStartDi=void 0,e.yyBlockChu=void 0,e.gameType=void 0,e.numBlockTypeGeShu=void 0,e.numBlockType=void 0,e.numBlocksKuaiGeShu=void 0,e.numBlocksKuai=void 0,e.arrNumDJ=void 0,e.audioSource=void 0,e.isEditing=void 0,e.numTypeEdit=void 0,e.numBlockEditMove=void 0,e.numTypeSuiJi=void 0,e.numSuiJi=void 0,e.bannerAd=void 0,e.wx=void 0,e.isWX=void 0,e.idBannerAD=void 0,e.interstitialAd=void 0,e.videoAd=void 0,e.numDJ=void 0,e.idChaPingAD=void 0,e.idJiLiShiPinAD=void 0,e.blockPool=void 0,e}i(e,t);var r=e.prototype;return r.start=function(){if(this.startLayer.active=!0,this.gameType=-1,this.isWX=w,this.wx=window.wx,this.idBannerAD="xxxx",this.idChaPingAD="xxxx",this.idJiLiShiPinAD="xxxx",this.blockPool=new c,this.numLevel=0,this.numBlockTypeGeShu=10,this.numBlockType=2,this.numBlocksKuaiGeShu=99,this.numBlocksKuai=6,this.arrNumDJ=[3,3,3,3],this.isEditing=this.parentEdit.active,this.numTypeEdit=1,this.numTypeSuiJi=2,this.numSuiJi=200,this.numDJ=-1,this.audioSource=this.node.getComponent(p),this.yyBlockChu=120,this.xxStartDi=-240,this.gameData=this.node.getComponent(C),this.createBlocksEdit(),this.init(),this.isWX){this.bannerAd=null,this.interstitialAd=null,this.videoAd=null,this.initBannerAD(),this.initChaPing(),this.initJiLiShiPin(),this.wx.showShareMenu();var t=this.node.getChildByName("btn_study");t&&(t.active=!1),this.scheduleOnce((function(){this.bannerAd.show().then((function(){return console.log("banner 广告显示")}))}),5)}d.on(m.EventType.TOUCH_START,this.onTouchStart,this),d.on(m.EventType.TOUCH_MOVE,this.onTouchMove,this),d.on(m.EventType.TOUCH_END,this.onTouchEnd,this),this.startButton.on(a.EventType.TOUCH_END,this.startGame,this),this.alertButton.on(a.EventType.TOUCH_END,this.closeAlert,this)},r.startGame=function(){this.startLayer.active=!1,this.gameType=0,this.refreshLevelInfo(!0)},r.shareFirend=function(t){if(void 0!==this.wx){this.wx.shareAppMessage({title:"真是太好玩了,一起来玩吧",imageUrl:"https://download.cocos.com/CocosStore/icon/7374c4a18a774ab7a05b72d5d8e5fed6/7374c4a18a774ab7a05b72d5d8e5fed6.png"}),t&&t()}},r.showJiLiShiPin=function(){var t=this;this.videoAd?this.videoAd.show().catch((function(){t.videoAd.load().then((function(){return t.videoAd.show()})).catch((function(){console.log("激励视频 广告显示失败")}))})):this.visibleTooltip("激励视频未加载成功")},r.initJiLiShiPin=function(){var t=this;this.videoAd=this.wx.createRewardedVideoAd({adUnitId:this.idJiLiShiPinAD}),this.videoAd.onLoad((function(){console.log("激励视频 广告加载成功")})),this.videoAd.onError((function(t){console.log(t)})),this.videoAd.onClose((function(e){e&&e.isEnded||void 0===e?0==t.numDJ?(t.arrNumDJ[0]++,t.shuaXinDJ()):1==t.numDJ?(t.arrNumDJ[1]++,t.shuaXinDJ()):2==t.numDJ?(t.arrNumDJ[2]++,t.shuaXinDJ()):3==t.numDJ&&(t.arrNumDJ[3]++,t.shuaXinDJ()):t.visibleTooltip("未观看完整广告，不予奖励！")}))},r.initChaPing=function(){this.wx.createInterstitialAd&&(this.interstitialAd=this.wx.createInterstitialAd({adUnitId:this.idChaPingAD}))},r.initBannerAD=function(){var t=this,e=this.wx.getSystemInfoSync().screenWidth,i=this.wx.getSystemInfoSync().screenHeight;this.bannerAd=this.wx.createBannerAd({adUnitId:this.idBannerAD,style:{left:0,top:0,width:300}}),this.bannerAd.onError((function(t){console.log(t)})),this.bannerAd.onLoad((function(){console.log("banner 广告加载成功")})),this.bannerAd.onResize((function(n){t.bannerAd.style.left=(e-t.bannerAd.style.realWidth)/2,t.bannerAd.style.top=i-t.bannerAd.style.realHeight}))},r.init=function(){if(this.gameType=0,this.numTouchStart=-1,this.numTouchEnd=-1,this.layerOver.active=!1,this.nodeTip.scale=new v(0,0,0),this.shuaXinDJ(),this.isEditing)for(var t=this.parentBlocks.children,e=0;e<t.length;e++){var i=t[e].getComponent(S),n=Math.floor(30*Math.random());i.init(n)}else{if(2===this.numLevel)return this.gameType=-1,void this.openAlert();this.refreshLevelInfo();for(var o=this.parentBlocks.children,r=o.length-1;r>=0;r--)this.onBlockKilled(o[r]);this.crateBlocks()}this.parentBlocksDi.removeAllChildren(),this.determineSuperposition(),this.btn3()},r.createBlocksEdit=function(){for(var t=0;t<15;t++)for(var e=0;e<13;e++){var i=f(this.preBlockEdit);i.parent=this.parentEdit,i.setPosition(40*t-280,45*e-55,0),t==Math.floor(7.5)&&(i.getComponent(g).color=new y(255,0,0,98))}},r.openAlert=function(){this.alertLayer.active=!0,b(this.alertContent).to(.1,{scale:new v(1,1,1)}).start()},r.closeAlert=function(){var t=this;b(this.alertContent).to(.1,{scale:new v(0,0,0)}).call((function(){t.alertLayer.active=!1,t.start()})).start()},r.visibleTooltip=function(t){this.nodeTip.getChildByName("Label").getComponent(h).string=t,b(this.nodeTip).to(.1,{scale:new v(1,1,1)}).delay(2).to(.1,{scale:new v(0,0,0)}).start()},r.shuaXinDJ=function(){for(var t=0;t<this.arrLabelDJ.length;t++)this.arrLabelDJ[t].string=this.arrNumDJ[t]},r.refreshLevelInfo=function(t){var e=this;void 0===t&&(t=!1);var i=this.numLevel+1;if(this.labelLevel.string="第"+i+"关",(0!==this.numLevel||t)&&b(this.transiton).to(1.5,{position:new v(-1e3,0,0)}).call((function(){e.transiton.position=new v(1e3,0,0)})).start(),this.isEditing){1==this.numTypeEdit?this.labelLevel.string="添加块模式":this.labelLevel.string="删除块模式";var n=this.parentBlocks.children.length;n%3==0?(this.labelBlocksInfo.string="总共有"+n+"个块，是3的倍数",this.labelBlocksInfo.color=new y(0,0,0)):(this.labelBlocksInfo.string="总共有"+n+"个块，不是3的倍数",this.labelBlocksInfo.color=new y(255,0,0))}},r.onBlockKilled=function(t){this.blockPool.put(t)},r.crateBlocks=function(){var t=-1,e=this.numBlockTypeGeShu+this.numLevel*this.numBlockType;this.gameData.arrTypeLevel[this.numLevel]&&(e=this.gameData.arrTypeLevel[this.numLevel]),e>30&&(e=30);var i=Math.floor(Math.random()*e);if(this.gameData.arrPosLevel[this.numLevel])for(var n=0;n<this.gameData.arrPosLevel[this.numLevel].length;n++){t++;var o=null;o=this.blockPool.size()>0?this.blockPool.get():f(this.preBlock);var r=this.gameData.arrPosLevel[this.numLevel][n].x,s=this.gameData.arrPosLevel[this.numLevel][n].y;o.setPosition(r,s,0),o.parent=this.parentBlocks;var a=o.getComponent(S);t%3==0&&(i=Math.floor(Math.random()*e)),a.init(i)}else{for(var l=this.numBlocksKuaiGeShu+this.numLevel*this.numBlocksKuai,h=[],u=this.parentEdit.children,c=0;c<u.length;c++)"blockEdit"==u[c].name&&h.push(u[c].getPosition());for(var p=0;p<l;p++){t++;var d=null;d=this.blockPool.size()>0?this.blockPool.get():f(this.preBlock);var m=500*Math.random()-250,v=510*Math.random()-60;if(1==this.numTypeSuiJi){var g=Math.floor(Math.random()*h.length);m=h[g].x,v=h[g].y}else if(2==this.numTypeSuiJi&&Math.random()>.5){var y=Math.floor(Math.random()*h.length);m=h[y].x,v=h[y].y}d.setPosition(m,v,0),d.parent=this.parentBlocks;var b=d.getComponent(S);t%3==0&&(i=Math.floor(Math.random()*e)),b.init(i)}}},r.createBlockToBi=function(t,e){var i=this,n=null;(n=this.blockPool.size()>0?this.blockPool.get():f(this.preBlock)).parent=this.parentBlocksDi;var o=n.getComponent(S);o.initDi(t);var r=this.getNumDi();this.shuaXinNumDi(n);var s=this.xxStartDi+80*r,a=this.parentBlocks.getComponent(B).convertToWorldSpaceAR(e),l=this.parentBlocksDi.getComponent(B).convertToNodeSpaceAR(a);n.setPosition(l),o.v3BlockOld=l,b(n).to(.1,{position:new v(s,15,0)}).call((function(){i.pdXiaoChu(n)})).start()},r.pdXiaoChu=function(t){var e=t.getComponent(S);e.isMoving=!1;for(var i=e.numDi,n=this.parentBlocksDi.children,o=[],r=0;r<n.length;r++){var s=n[r].getComponent(S);e.elementType==s.elementType&&0==s.isEliminate&&o.push(n[r])}var a=!1;if(3==o.length)for(var l=o.length-1;l>=0;l--)o[l].getComponent(S).isEliminate=!0,b(o[l]).delay(.05).to(.08,{scale:new v(0,0,0)}).removeSelf().start(),a=!0;if(a){this.audioSource.playOneShot(this.arrAudio[1],1);for(var h=this.parentBlocksDi.children,u=0;u<h.length;u++){var c=h[u].getComponent(S);if(c.numDi>i){c.numDi=c.numDi-3;var p=this.xxStartDi+80*c.numDi;b(h[u]).delay(.05).to(.08,{position:new v(p,15,0)}).start()}}}for(var d=0,m=this.parentBlocksDi.children,f=0;f<m.length;f++){m[f].getComponent(S).isEliminate&&d++}m.length-d>=7&&(this.gameType=-1,this.audioSource.playOneShot(this.arrAudio[2],1),this.interstitialAd&&this.interstitialAd.show().catch((function(t){console.error(t)})),this.scheduleOnce((function(){this.layerOver.active=!0}),.5))},r.getNumDi=function(){for(var t=this.parentBlocksDi.children,e=t[t.length-1].getComponent(S),i=0,n=0;n<t.length;n++){t[n].getComponent(S).isEliminate&&i++}t.length-i==1&&(e.numDi=0);for(var o=t.length-2;o>=0;o--){var r=t[o].getComponent(S);if(e.elementType==r.elementType&&0==r.isEliminate)return e.numDi=r.numDi+1,e.numDi}return e.numDi=t.length-1-i,e.numDi},r.shuaXinNumDi=function(t){for(var e=t.getComponent(S).numDi,i=this.parentBlocksDi.children,n=0;n<i.length;n++){var o=i[n].getComponent(S);if(t.uuid!=i[n].uuid&&!o.isEliminate&&o.numDi>=e){o.numDi++;var r=this.xxStartDi+80*o.numDi;b(i[n]).to(.09,{position:new v(r,15)}).start()}}},r.determineSuperposition=function(){for(var t=this.parentBlocks.children,e=0;e<t.length;e++){var i=t[e].getComponent(S),n=i.getBoundingBox();i.setTouch(!0);for(var o=e+1;o<t.length;o++){var r=t[o].getComponent(S).getBoundingBox();if(n.intersects(r)){i.setTouch(!1);break}}}},r.onTouchStart=function(t){if(0==this.gameType&&!this.pdBlockDiMoving()){this.numTouchStart=-1;var e=t.getUILocation(),i=this.parentBlocks.getComponent(B).convertToNodeSpaceAR(new v(e.x,e.y,0)),n=this.parentEdit.getComponent(B).convertToNodeSpaceAR(new v(e.x,e.y,0));if(this.isEditing){if(1==this.numTypeEdit)for(var o=this.parentEdit.children,r=o.length-1;r>=0;r--){if(o[r].getComponent(B).getBoundingBox().contains(new k(n.x,n.y))){this.numBlockEditMove=r;var s=null;(s=this.blockPool.size()>0?this.blockPool.get():f(this.preBlock)).parent=this.parentBlocks,s.setPosition(o[r].getPosition());var a=s.getComponent(S),l=Math.floor(30*Math.random());a.init(l),this.refreshLevelInfo(),this.determineSuperposition();break}}else if(0==this.numTypeEdit)for(var h=this.parentBlocks.children,u=h.length-1;u>=0;u--){if(h[u].getComponent(B).getBoundingBox().contains(new k(i.x,i.y))){this.onBlockKilled(h[u]),this.refreshLevelInfo(),this.determineSuperposition();break}}}else for(var c=this.parentBlocks.children,p=c.length-1;p>=0;p--){if(0!=c[p].getComponent(S).isCanTouch)if(c[p].getComponent(B).getBoundingBox().contains(new k(i.x,i.y))){this.audioSource.playOneShot(this.arrAudio[0],1),this.numTouchStart=p,b(c[p]).to(.1,{scale:new v(1.2,1.2,1.2)}).start();break}}}},r.onTouchMove=function(t){var e=t.getUILocation(),i=this.parentBlocks.getComponent(B).convertToNodeSpaceAR(new v(e.x,e.y,0)),n=this.parentEdit.getComponent(B).convertToNodeSpaceAR(new v(e.x,e.y,0));if(this.isEditing){if(1==this.numTypeEdit)for(var o=this.parentEdit.chidlren,r=o.length-1;r>=0;r--){if(o[r].getComponent(B).getBoundingBox().contains(new k(n.x,n.y))){if(this.numBlockEditMove==r)return;this.numBlockEditMove=r;var s=null;(s=this.blockPool.size()>0?this.blockPool.get():f(this.preBlock)).parent=this.parentBlocks,s.setPosition(o[r].getPosition());var a=s.getComponent(S),l=Math.floor(30*Math.random());a.init(l),this.refreshLevelInfo(),this.determineSuperposition();break}}else if(0==this.numTypeEdit)for(var h=this.parentBlocks.chidlren,u=h.length-1;u>=0;u--){h[u].getComponent(S);if(h[u].getComponent(B).getBoundingBox().contains(new k(i.x,i.y))){this.onBlockKilled(h[u]),this.refreshLevelInfo(),this.determineSuperposition();break}}}else;},r.onTouchEnd=function(t){if(!this.isEditing&&0==this.gameType&&!this.pdBlockDiMoving()){for(var e=t.getUILocation(),i=this.parentBlocks.getComponent(B).convertToNodeSpaceAR(new v(e.x,e.y,0)),n=this.parentBlocks.children,o=n.length-1;o>=0;o--){if(0!=n[o].getComponent(S).isCanTouch)if(n[o].getComponent(B).getBoundingBox().contains(new k(i.x,i.y))&&(this.numTouchEnd=o,this.numTouchStart==this.numTouchEnd)){var r=n[o].getComponent(S).elementType;this.createBlockToBi(r,n[o].getPosition()),this.onBlockKilled(n[o]),this.determineSuperposition();break}}-1!=this.numTouchStart&&b(n[this.numTouchStart]).to(.1,{scale:new v(1,1,1)}).start(),0==this.parentBlocks.children.length&&(this.gameType=1,this.audioSource.playOneShot(this.arrAudio[3],1),this.numLevel++,this.interstitialAd&&this.interstitialAd.show().catch((function(t){console.error(t)})),this.scheduleOnce((function(){this.init()}),1))}},r.pdBlockDiMoving=function(){var t=!1,e=this.parentBlocksDi.children;e.length>0&&(t=e[e.length-1].getComponent(S).isMoving);return t},r.callBackBtn=function(t,e){var i=this;if("btn_3"==e){if(this.arrNumDJ[2]<=0)return void(this.isWX?(this.numDJ=2,this.showJiLiShiPin()):this.visibleTooltip("没有这个道具了"));this.arrNumDJ[2]--,this.shuaXinDJ(),this.btn3()}else if("btn_shuChu"==e)this.shuChuPosBlocks();else if("btn_1"==e){if(this.arrNumDJ[0]<=0)return void(this.isWX?(this.numDJ=0,this.showJiLiShiPin()):this.visibleTooltip("没有这个道具了"));this.arrNumDJ[0]--,this.btn1(),this.shuaXinDJ()}else if("btn_2"==e){if(this.arrNumDJ[1]<=0){if(this.isWX){this.shareFirend((function(){i.arrNumDJ[1]++,i.shuaXinDJ()}))}else this.visibleTooltip("没有这个道具了");return}this.arrNumDJ[1]--,this.btn2(),this.shuaXinDJ()}else if("btn_fh"==e){if(this.arrNumDJ[3]<=0)return void(this.isWX?(this.numDJ=3,this.showJiLiShiPin()):this.visibleTooltip("没有这个道具了"));this.arrNumDJ[3]--,this.shuaXinDJ(),this.gameType=0,this.layerOver.active=!1,this.btn1()}else if("btn_cw"==e)this.numLevel=0,this.init();else if("btn_yin"==e)for(var n=this.parentEdit.children,o=0;o<n.length;o++)"blockEdit"==n[o].name&&(n[o].active=!n[o].active);else if("btn_qingKong"==e)this.parentBlocks.removeAllChildren(),this.refreshLevelInfo();else if("btn_jia"==e)this.numTypeEdit=1,this.refreshLevelInfo();else if("btn_jian"==e)this.numTypeEdit=0,this.refreshLevelInfo();else if("btn_suiJi"==e){for(var r=[],s=this.parentEdit.children,a=0;a<s.length;a++)"blockEdit"==s[a].name&&r.push(s[a].getPosition());for(var l=0;l<this.numSuiJi;l++){var h=null;(h=this.blockPool.size()>0?this.blockPool.get():f(this.preBlock)).parent=this.parentBlocks;var u=Math.floor(Math.random()*r.length);h.setPosition(r[u]),h.getComponent(S).init(Math.floor(30*Math.random()))}this.refreshLevelInfo(),this.determineSuperposition()}else"btn_study"==e&&D.openURL("https://ke.qq.com/cgi-bin/agency?aid=118802&tuin=954863b4#tab=1&category=-1")},r.btn2=function(){for(var t=this,e=this.parentBlocksDi.children,i=-1,n=e.length-1;n>=0;n--){if(!e[n].getComponent(S).isEliminate){i=n;break}}var o=-1;if(-1!=i){var r=e[i].getComponent(S);o=r.numDi,r.isEliminate=!0;var s=r.v3BlockOld,a=this.parentBlocksDi.getComponent(B).convertToWorldSpaceAR(s),l=this.parentBlocks.getComponent(B).convertToNodeSpaceAR(a);b(e[i]).to(.1,{position:s}).call((function(){var e=null;(e=t.blockPool.size()>0?t.blockPool.get():f(t.preBlock)).parent=t.parentBlocks,e.setPosition(l),e.getComponent(S).init(r.elementType),t.determineSuperposition()})).removeSelf().start()}-1==o&&(this.arrNumDJ[1]++,this.visibleTooltip("当前不可用该道具"));for(var h=this.parentBlocksDi.children,u=0;u<h.length;u++){var c=h[u].getComponent(S);if(!c.isEliminate&&(c.numDi>o&&-1!=o)){c.numDi=c.numDi-1;var p=this.xxStartDi+80*c.numDi;b(h[u]).to(.08,{position:new v(p,0,0)}).start()}}},r.btn1=function(){for(var t=this,e=[],i=this.parentBlocksDi.children,n=0;n<i.length;n++){var o=i[n].getComponent(S);o.numDi<3&&0==o.isEliminate&&e.push(i[n])}var r=e.length;0==r&&(this.arrNumDJ[0]++,this.visibleTooltip("当前不可用该道具"));for(var s=function(i){var n=e[i].getComponent(S),o=new v(80*n.numDi-80,t.yyBlockChu,0),r=t.parentBlocksDi.getComponent(B).convertToWorldSpaceAR(o),s=t.parentBlocks.getComponent(B).convertToNodeSpaceAR(r);n.isEliminate=!0,b(e[i]).to(.1,{position:o}).call((function(){var e=null;(e=t.blockPool.size()>0?t.blockPool.get():f(t.preBlock)).parent=t.parentBlocks,e.setPosition(s),e.getComponent(S).init(n.elementType),t.determineSuperposition()})).removeSelf().start()},a=e.length-1;a>=0;a--)s(a);for(var l=this.parentBlocksDi.children,h=0;h<l.length;h++){var u=l[h].getComponent(S);if(!u.isEliminate){u.numDi=u.numDi-r;var c=this.xxStartDi+80*u.numDi;b(l[h]).to(.08,{position:new v(c,0,0)}).start()}}},r.btn3=function(){for(var t=this.parentBlocks.children,e=0;e<t.length;e++){var i=t[e].getComponent(S),n=t[Math.floor(Math.random()*t.length)].getComponent(S),o=i.elementType,r=n.elementType;i.shuaXinBlockSPF(r),n.shuaXinBlockSPF(o)}},r.shuChuPosBlocks=function(){for(var t="",e=this.parentBlocks.children,i=0;i<e.length;i++){var n=e[i].getPosition();t=t+"{x:"+n.x+",y:"+n.y+"},"}e.length%3==0?e.length>0?this.copyToClipBoard(t):(console.log("块的个数为0，无效"),this.visibleTooltip("块的个数为0，无效")):(console.log("块的个数不是3的倍数，无效"),this.visibleTooltip("块的个数不是3的倍数，无效"))},r.copyToClipBoard=function(t){if(D.isNative);else if(D.isBrowser){var e=document.createElement("textarea");e.textContent=t,document.body.appendChild(e),e.readOnly=!0,e.select(),e.setSelectionRange(0,e.textContent.length);try{var i=document.execCommand("copy");return document.body.removeChild(e),i?(this.visibleTooltip("复制数据成功！"),console.log("复制数据成功！"),!0):(this.visibleTooltip("复制失败！"),console.log("复制失败！"),!1)}catch(t){return this.visibleTooltip("复制失败！"),console.log("复制失败！"),!1}}},r.update=function(t){},e}(T)).prototype,"transiton",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(F.prototype,"alertButton",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(F.prototype,"alertLayer",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(F.prototype,"alertContent",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(F.prototype,"preBlock",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=e(F.prototype,"parentBlocks",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(F.prototype,"parentBlocksDi",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),tt=e(F.prototype,"nodeTip",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=e(F.prototype,"labelLevel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),it=e(F.prototype,"layerOver",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),nt=e(F.prototype,"startLayer",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ot=e(F.prototype,"parentEdit",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),rt=e(F.prototype,"startButton",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),st=e(F.prototype,"labelBlocksInfo",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at=e(F.prototype,"preBlockEdit",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),lt=e(F.prototype,"arrLabelDJ",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ht=e(F.prototype,"arrAudio",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),G=F))||G));r._RF.pop()}}}));

System.register("chunks:///_virtual/gameData.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(y){"use strict";var x,e,t,r;return{setters:[function(y){x=y.inheritsLoose},function(y){e=y.cclegacy,t=y._decorator,r=y.Component}],execute:function(){var a;e._RF.push({},"751d6Xjyu9D+6Q00DTbHagk","gameData",void 0);y("gameData",t.ccclass("gameData")(a=function(y){function e(){for(var x,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return(x=y.call.apply(y,[this].concat(t))||this).arrPosLevel=void 0,x.arrTypeLevel=void 0,x}x(e,y);var t=e.prototype;return t.start=function(){this.arrTypeLevel=[5,16],this.arrPosLevel=[[{x:-160,y:440},{x:-160,y:395},{x:0,y:440},{x:0,y:395},{x:160,y:440},{x:160,y:395},{x:-160,y:260},{x:-160,y:215},{x:0,y:260},{x:0,y:215},{x:160,y:260},{x:160,y:215},{x:-160,y:80},{x:-160,y:35},{x:0,y:80},{x:0,y:35},{x:160,y:80},{x:160,y:35}],[{x:0,y:35},{x:-160,y:350},{x:240,y:350},{x:240,y:80},{x:40,y:395},{x:-160,y:305},{x:-280,y:80},{x:-160,y:485},{x:-120,y:125},{x:-120,y:215},{x:-200,y:305},{x:280,y:125},{x:-240,y:125},{x:160,y:395},{x:-240,y:125},{x:160,y:215},{x:120,y:215},{x:200,y:80},{x:280,y:125},{x:0,y:395},{x:-80,y:395},{x:120,y:485},{x:-160,y:125},{x:280,y:350},{x:40,y:350},{x:160,y:350},{x:160,y:305},{x:120,y:440},{x:80,y:350},{x:200,y:440},{x:-280,y:350},{x:-80,y:305},{x:40,y:395},{x:40,y:80},{x:80,y:485},{x:240,y:305},{x:-160,y:260},{x:-240,y:35},{x:-120,y:305},{x:-40,y:350},{x:200,y:170},{x:-120,y:-10},{x:160,y:395},{x:240,y:125},{x:120,y:-10},{x:200,y:35},{x:120,y:305},{x:-80,y:-10},{x:-120,y:-10},{x:160,y:-10},{x:0,y:395},{x:-120,y:305},{x:240,y:35},{x:120,y:35},{x:-40,y:-55},{x:-80,y:485},{x:-200,y:80},{x:200,y:395},{x:-280,y:350},{x:-160,y:-10},{x:-80,y:305},{x:120,y:-55},{x:-80,y:-10},{x:-80,y:485},{x:-200,y:125},{x:160,y:305},{x:-40,y:350},{x:-200,y:395},{x:200,y:350},{x:40,y:35},{x:160,y:170},{x:-120,y:485},{x:-120,y:-55},{x:-160,y:305},{x:160,y:350},{x:160,y:-55},{x:-120,y:350},{x:160,y:80},{x:-240,y:125},{x:-160,y:215},{x:80,y:395},{x:200,y:215},{x:-80,y:440},{x:-200,y:350},{x:-120,y:170},{x:-160,y:35},{x:200,y:170},{x:-160,y:350},{x:0,y:35},{x:240,y:170},{x:280,y:35},{x:-200,y:305},{x:-120,y:395},{x:160,y:260},{x:0,y:35},{x:-160,y:260},{x:280,y:305},{x:280,y:395},{x:80,y:-55},{x:-160,y:170},{x:160,y:-55},{x:-200,y:350},{x:160,y:350},{x:-120,y:125},{x:240,y:35},{x:80,y:125},{x:200,y:305},{x:-40,y:80},{x:280,y:125},{x:-280,y:305},{x:-160,y:-10},{x:-40,y:35},{x:-160,y:440},{x:-240,y:395},{x:-280,y:80},{x:-200,y:35},{x:-160,y:395},{x:160,y:305},{x:-120,y:80},{x:280,y:350},{x:-160,y:440},{x:0,y:80},{x:-280,y:305},{x:-120,y:170},{x:-80,y:395},{x:-80,y:125},{x:-40,y:350},{x:240,y:350},{x:80,y:35},{x:120,y:-55},{x:-120,y:170},{x:-240,y:350},{x:-40,y:125},{x:-40,y:-10},{x:-280,y:125},{x:0,y:350},{x:-120,y:35},{x:-280,y:125},{x:80,y:440},{x:-200,y:350},{x:-120,y:-10},{x:-200,y:350},{x:-40,y:35},{x:240,y:350},{x:120,y:170},{x:160,y:-55},{x:-200,y:80},{x:200,y:125},{x:-120,y:35},{x:-160,y:350},{x:160,y:260},{x:240,y:350},{x:160,y:350},{x:240,y:35},{x:120,y:485},{x:-160,y:350},{x:-120,y:-10},{x:-160,y:440},{x:200,y:35},{x:80,y:485},{x:-120,y:260},{x:280,y:350},{x:120,y:170},{x:200,y:305},{x:120,y:35},{x:-160,y:170},{x:0,y:395},{x:120,y:-10},{x:200,y:125},{x:160,y:440},{x:80,y:350},{x:240,y:80},{x:160,y:440},{x:-200,y:80},{x:-80,y:-10},{x:0,y:80},{x:200,y:80},{x:80,y:35},{x:0,y:80},{x:160,y:440},{x:200,y:350},{x:80,y:80},{x:240,y:80},{x:-40,y:-10},{x:-80,y:485},{x:80,y:440},{x:-200,y:80},{x:240,y:125},{x:160,y:350},{x:160,y:35},{x:-160,y:440},{x:-160,y:35},{x:160,y:350},{x:-120,y:260},{x:120,y:125},{x:200,y:170},{x:160,y:170},{x:160,y:350},{x:80,y:-10},{x:160,y:125},{x:120,y:305},{x:80,y:35},{x:80,y:485},{x:-80,y:-55},{x:240,y:170},{x:-40,y:125},{x:160,y:-10},{x:-280,y:80},{x:160,y:215},{x:-240,y:35},{x:-40,y:-55},{x:80,y:125},{x:120,y:-55},{x:80,y:-10},{x:160,y:215},{x:240,y:35},{x:200,y:170},{x:-80,y:395},{x:-80,y:35},{x:120,y:485},{x:280,y:170},{x:80,y:80},{x:240,y:80},{x:160,y:-10},{x:-240,y:350},{x:160,y:80},{x:-80,y:-10},{x:-120,y:395},{x:-120,y:-55},{x:-40,y:125},{x:200,y:80},{x:-80,y:395},{x:-40,y:80},{x:200,y:125},{x:-120,y:350},{x:-120,y:440},{x:-40,y:80},{x:-120,y:35},{x:160,y:440},{x:-160,y:350},{x:80,y:80},{x:280,y:305},{x:-80,y:-55},{x:120,y:485},{x:-120,y:-10},{x:-280,y:305},{x:80,y:35},{x:-240,y:35},{x:-120,y:-10},{x:-120,y:-55},{x:-240,y:395},{x:120,y:-10},{x:-200,y:305},{x:-40,y:35},{x:160,y:-55},{x:80,y:-10},{x:-280,y:350},{x:-40,y:35},{x:-280,y:305},{x:-80,y:-55},{x:120,y:35},{x:-240,y:395},{x:-160,y:-10},{x:80,y:35},{x:-40,y:35},{x:160,y:-10},{x:-160,y:-55},{x:120,y:-55},{x:-40,y:35},{x:160,y:485},{x:-80,y:-55},{x:160,y:485},{x:-40,y:35},{x:160,y:-55},{x:120,y:-10},{x:160,y:35},{x:80,y:485},{x:120,y:-10},{x:160,y:-10},{x:-280,y:350},{x:80,y:-55},{x:80,y:485},{x:-280,y:125},{x:-280,y:305},{x:-160,y:-55},{x:160,y:35},{x:-80,y:-55},{x:-160,y:-10}]]},t.update=function(y){},e}(r))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/loadView.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var r,i,s,t,o,n,l,u,c,a,p;return{setters:[function(e){r=e.applyDecoratedDescriptor,i=e.inheritsLoose,s=e.initializerDefineProperty,t=e.assertThisInitialized},function(e){o=e.cclegacy,n=e._decorator,l=e.ProgressBar,u=e.Slider,c=e.profiler,a=e.director,p=e.Component}],execute:function(){var d,g,h,f,y,v,b;o._RF.push({},"065d0gwpG9BHYnoYGby31f5","loadView",void 0);var w=n.ccclass,S=n.property;e("loadView",(d=w("loadView"),g=S(l),h=S(u),d((v=r((y=function(e){function r(){for(var r,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return r=e.call.apply(e,[this].concat(o))||this,s(r,"progre",v,t(r)),s(r,"sli",b,t(r)),r}i(r,e);var o=r.prototype;return o.start=function(){c.hideStats(),this.startJindu()},o.onDestroy=function(){this.unscheduleAllCallbacks()},o.startJindu=function(){var e=this;this.progre.progress=0,this.sli.progress=0,this.schedule((function(){e.progre.progress+=.1,e.sli.progress+=.1,e.progre.progress>=.5&&(e.unschedule(e.schedule),e.jinduPause())}),.1,4,.05)},o.jinduPause=function(){var e=this;this.scheduleOnce((function(){e.loadScene()}),.8)},o.loadScene=function(){var e=this;this.schedule((function(){if(e.progre.progress>=.9)return e.progre.progress=1,e.sli.progress=1,e.unschedule(e.schedule),void a.loadScene("game");e.progre.progress+=.1,e.sli.progress+=.1}),.1,5,.2)},r}(p)).prototype,"progre",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=r(y.prototype,"sli",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=y))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./block.ts","./game.ts","./gameData.ts","./loadView.ts"],(function(){"use strict";return{setters:[null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});
//# sourceMappingURL=index.js.map